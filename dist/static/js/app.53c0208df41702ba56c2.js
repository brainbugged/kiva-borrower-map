webpackJsonp([1],[,,,,,,,,,function(t,e,o){"use strict";var n=o(2);e.a=new n.a},,function(t,e,o){var n=o(1)(o(38),o(57),null,null,null);t.exports=n.exports},function(t,e,o){"use strict";var n=o(2),a=o(64),i=o(52),s=o.n(i);n.a.use(a.a),e.a=new a.a({routes:[{path:"/",name:"Borrower Map",component:s.a}]})},function(t,e){},function(t,e,o){function n(t){o(46)}var a=o(1)(o(34),o(61),n,null,null);t.exports=a.exports},,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2),a=o(14),i=o.n(a),s=o(12);o(13),n.a.config.productionTip=!1,n.a.config.performance=!1,new n.a({el:"#app",router:s.a,template:"<App/>",components:{App:i.a}})},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(10),a=o.n(n),i=o(9),s=o(56),r=o.n(s),c=o(54),l=o.n(c),u=o(15),d=(o.n(u),o(55)),f=o.n(d),p=o(11),m=o.n(p);e.default={name:"home",data:function(){return{msg:"Kiva US Borrowers",locations:[],radius:1,lat:37.8043722,lng:-122.2708026,bounds:{},noLocationMsg:"",resultsMsg:""}},components:{LocationList:l.a,MapView:f.a,Locator:m.a,SearchBar:r.a},methods:{executeQuery:function(t){this.noLocationMsg="",this.resultsMsg="",t&&(this.lastAttemptedQuery=t),this.radius=t?t.radius:1,this.lat=t?t.latitude:37.8043722,this.lng=t?t.longitude:-122.2708026;var e=this;u.get("/locations",{params:{radius:e.radius,lat:e.lat,lng:e.lng}}).then(function(o){o.data.locations.length>2?(e.updateLocations(o.data),t&&(e.lastSuccessfulQuery=t,e.resultsMsg="Showing results for "+t.searchTerm+" within "+t.radius+" miles.")):e.expandRadius()})},expandRadius:function(){var t=JSON.parse(a()(this.lastAttemptedQuery));t.radius=2*parseInt(this.lastAttemptedQuery.radius),t.radius<1e3?this.executeQuery(t):(this.executeQuery(this.lastSuccessfulQuery),this.noLocationMsg="No results within "+t.radius+"miles. Please try another search.")},updateLocations:function(t){this.bounds=t.bounds,this.locations=[],this.locations=t.locations}},beforeMount:function(){this.executeQuery()},mounted:function(){i.a.$emit("home-loaded","home is loaded")}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"list-item",props:["location"]}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(53),a=o.n(n);e.default={name:"list",props:["fetchedLocations"],methods:{},mounted:function(){console.log("List is mounted")},components:{ListItem:a.a}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"locator",methods:{locatorDiv:function(){return document.getElementById("userLocation")},getLocation:function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(this.showPosition)},showPosition:function(t){this.$emit("getLocation",t.coords)}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(9),a=o(50),i=o.n(a);e.default={name:"map",data:function(){return{}},props:["fetchedLocations","lat","lng","bounds"],methods:{initalizeMap:function(){this.mapView=i.a.map("map").setView({lat:this.lat,lng:this.lng},15);var t="pk.eyJ1IjoibWZhYnJvcyIsImEiOiJjaW9raTI1NzgwMDFndXVqYmJ5bnF5bnIxIn0.DmUQmGI5wqeiGZLMw7BJ8g",e={default:"https://api.mapbox.com/styles/v1/mapbox/streets-v10/tiles/256/{z}/{x}/{y}?access_token=",satellite:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token=",traffic:"https://api.mapbox.com/styles/v1/mapbox/traffic-day-v2/tiles/256/{z}/{x}/{y}?access_token="},o=e.default+"{"+t+"}",n=e.default+t;i.a.tileLayer(n,{attribution:"Map data &copy; "+o,maxZoom:18}).addTo(this.mapView),this.currentLocationLayer=i.a.layerGroup(),this.currentLocationLayer.addTo(this.mapView)},displayLocations:function(){this.updateLocationLayer(),this.setMapViewWithBounds()},updateLocationLayer:function(){console.log("Removing "+this.currentLocationLayer.getLayers().length+" layers..."),this.currentLocationLayer.clearLayers();var t=this;this.fetchedLocations.forEach(function(e,o){var n=e,a=t.buildLocationInfo(n),s=i.a.circleMarker([n.coordinates.latitude,n.coordinates.longitude],{radius:11,fillOpacity:.8,fillColor:"#63a541",color:"#236133",weight:2}).bindPopup(a);t.currentLocationLayer.addLayer(s)}),console.log(this.currentLocationLayer.getLayers().length+" layers added to layerGroup")},buildLocationInfo:function(t){for(var e="",o=0;t.location.display_address.length>o;o++)e+=t.location.display_address[o],o<=t.location.display_address.length&&(e+="<br>");return"<h4>"+t.name+"</h4><small><b>Phone:</b><br> "+t.display_phone+"</small><br><small><b>Address:</b><br> "+e+'</small><br><small><a href="'+t.url+'" target="_blank">View on Yelp</a></small>'},setMapViewWithBounds:function(){this.bounds&&this.bounds.latmin&&this.mapView.fitBounds([[this.bounds.latmin,this.bounds.lngmin],[this.bounds.latmax,this.bounds.lngmax]])},centerMap:function(){console.log("centering"),this.mapView.setView({lat:this.lat,lng:this.lng})}},watch:{fetchedLocations:function(){this.displayLocations()},lat:function(){this.centerMap()},lng:function(){this.centerMap()}},mounted:function(){console.log("map is mounted"),this.initalizeMap(),this.displayLocations()},beforeUpdate:function(){console.log("before map update")},created:function(){n.a.$on("home-loaded",function(t){console.log(t)})}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(10),a=o.n(n),i=o(11),s=o.n(i);e.default={name:"search",data:function(){return{radius:1,searchTerm:"City, State or Zip Code",latitude:37.8043722,longitude:-122.2708026}},components:{Locator:s.a},methods:{geoCodeSearch:function(){console.log("Searching "+this.searchTerm+" within "+this.radius+" miles.");var t=new window.google.maps.Geocoder,e=this.searchTerm,o=this;t.geocode({address:e},function(t,e){"OK"===e?(o.latitude=t[0].geometry.location.lat(),o.longitude=t[0].geometry.location.lng(),console.log(t[0].geometry.location.lat(),t[0].geometry.location.lng()),o.initializeLocationQuery()):alert("Geocode was not successful for the following reason: "+e)})},initializeLocationQuery:function(){this.$emit("executeQuery",JSON.parse(a()(this.$data)))},showUserLocation:function(t){console.log(t),this.searchTerm="Your Location",this.latitude=t.latitude,this.longitude=t.longitude,this.initializeLocationQuery()},selectAll:function(t){setTimeout(function(){t.target.select()},0)}}}},,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,function(t,e,o){function n(t){o(43)}var a=o(1)(o(35),o(58),n,null,null);t.exports=a.exports},function(t,e,o){function n(t){o(44)}var a=o(1)(o(36),o(59),n,"data-v-3aedcf1c",null);t.exports=a.exports},function(t,e,o){function n(t){o(47)}var a=o(1)(o(37),o(62),n,"data-v-7ef750f0",null);t.exports=a.exports},function(t,e,o){function n(t){o(48)}var a=o(1)(o(39),o(63),n,null,null);t.exports=a.exports},function(t,e,o){function n(t){o(45)}var a=o(1)(o(40),o(60),n,"data-v-41869ba4",null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"button setting",on:{click:function(e){e.preventDefault(),t.getLocation(e)}}},[t._v("Near Me")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("h1",[t._v(t._s(t.msg))]),t._v(" "),o("SearchBar",{on:{executeQuery:t.executeQuery}}),t._v(" "),t.noLocationMsg?o("p",[o("i",[t._v(t._s(t.noLocationMsg))])]):t._e(),t._v(" "),t.resultsMsg?o("p",[o("i",[t._v(t._s(t.resultsMsg))])]):t._e(),t._v(" "),o("div",{staticClass:"map-holder"},[o("MapView",{attrs:{fetchedLocations:t.locations,lat:t.lat,lng:t.lng,bounds:t.bounds}})],1),t._v(" "),o("div",{staticClass:"list-holder"},[o("LocationList",{attrs:{fetchedLocations:t.locations}})],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",[o("h4",[t._v(t._s(t.location.name))]),t._v(" "),o("small",[t._v(t._s(t.location.coordinates.latitude)+" / "+t._s(t.location.coordinates.longitude))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search-bar"},[o("div",{staticClass:"row"},[o("div",{staticClass:"locator-holder small-12 large-3 column"},[o("Locator",{on:{getLocation:t.showUserLocation}})],1),t._v(" "),o("form",{staticClass:"search-form clearfix small-12 large-9 column end"},[o("div",{staticClass:"small-12 medium-4 column"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"custom-location",attrs:{type:"text"},domProps:{value:t.searchTerm},on:{focus:t.selectAll,input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"small-6 medium-4 column"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.radius=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"1"}},[t._v("Radius (Miles)")]),t._v(" "),o("option",{attrs:{value:"1"}},[t._v("1")]),t._v(" "),o("option",{attrs:{value:"2"}},[t._v("2")]),t._v(" "),o("option",{attrs:{value:"5"}},[t._v("5")]),t._v(" "),o("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),o("option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),o("option",{attrs:{value:"50"}},[t._v("50")])])]),t._v(" "),o("div",{staticClass:"small-6 medium-4 column"},[o("button",{staticClass:"button setting",on:{click:function(e){e.preventDefault(),t.geoCodeSearch(e)}}},[t._v("Search")])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pageWrap",attrs:{id:"app"}},[o("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"location-list"},[o("ul",{attrs:{id:"locations"}},t._l(t.fetchedLocations,function(t,e){return o("ListItem",{key:t.id,attrs:{location:t,index:e}})}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:"map"}})},staticRenderFns:[]}}],[33]);
//# sourceMappingURL=app.53c0208df41702ba56c2.js.map